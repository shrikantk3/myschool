"use strict";(self.webpackChunkmyschool=self.webpackChunkmyschool||[]).push([[444],{444:(he,O,l)=>{l.r(O),l.d(O,{AuthModule:()=>ge});var _=l(177),g=l(9555),e=l(3953);let S=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-forgot-password"]],decls:106,vars:5,consts:[["xmlns","http://www.w3.org/1999/xhtml",0,"xmlns","v","urn:schemas-microsoft-com:vml",0,"xmlns","o","urn:schemas-microsoft-com:office:office"],["http-equiv","Content-Type","content","text/html; charset=UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["name","x-apple-disable-message-reformatting"],["http-equiv","X-UA-Compatible","content","IE=edge"],["href",e.wXG`https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap`,"rel","stylesheet","type","text/css"],[1,"clean-body","u_body",2,"margin","0","padding","0","-webkit-text-size-adjust","100%","background-color","#e7e7e7","color","#000000"],["id","u_body","cellpadding","0","cellspacing","0",2,"border-collapse","collapse","table-layout","fixed","border-spacing","0","mso-table-lspace","0pt","mso-table-rspace","0pt","vertical-align","top","min-width","320px","margin","0 auto","background-color","#e7e7e7","width","100%"],[2,"vertical-align","top"],[2,"word-break","break-word","border-collapse","collapse !important","vertical-align","top"],[1,"u-row-container",2,"padding","0px","background-image","url('https://cdn.templates.unlayer.com/assets/1697613131983-Layer%20bg.png')","background-repeat","no-repeat","background-position","center top","background-color","#fdeed2"],[1,"u-row",2,"margin","0 auto","min-width","320px","max-width","600px","overflow-wrap","break-word","word-wrap","break-word","word-break","break-word","background-color","transparent"],[2,"border-collapse","collapse","display","table","width","100%","height","100%","background-color","transparent"],[1,"u-col","u-col-100",2,"max-width","320px","min-width","600px","display","table-cell","vertical-align","top"],[2,"height","100%","width","100% !important"],[2,"box-sizing","border-box","height","100%","padding","0px","border-top","0px solid transparent","border-left","0px solid transparent","border-right","0px solid transparent","border-bottom","0px solid transparent"],["role","presentation","cellpadding","0","cellspacing","0","width","100%","border","0",2,"font-family","arial,helvetica,sans-serif"],["align","left",1,"v-container-padding-padding",2,"overflow-wrap","break-word","word-break","break-word","padding","40px 10px 10px","font-family","arial,helvetica,sans-serif"],[1,"v-font-size",2,"margin","0px","line-height","140%","text-align","center","word-wrap","break-word","font-family","'Montserrat',sans-serif","font-size","25px","font-weight","700"],["id","u_content_heading_2","role","presentation","cellpadding","0","cellspacing","0","width","100%","border","0",2,"font-family","arial,helvetica,sans-serif"],["align","left",1,"v-container-padding-padding",2,"overflow-wrap","break-word","word-break","break-word","padding","0px 10px 10px","font-family","arial,helvetica,sans-serif"],[1,"v-font-size",2,"margin","0px","line-height","110%","text-align","center","word-wrap","break-word","font-family","'Montserrat',sans-serif","font-size","30px","font-weight","700"],[2,"color","orangered"],[2,"text-align","center"],["id","u_content_image_1","role","presentation","cellpadding","0","cellspacing","0","width","100%","border","0",2,"font-family","arial,helvetica,sans-serif"],["align","left",1,"v-container-padding-padding",2,"overflow-wrap","break-word","word-break","break-word","padding","10px","font-family","arial,helvetica,sans-serif"],["width","100%","cellpadding","0","cellspacing","0","border","0"],["align","center",2,"padding-right","0px","padding-left","0px"],["align","center","border","0","src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQTQ2V1Wk_r4SOBPbLY3o391Gk6aeFu6UrYvA&s","alt","image","title","image","width","394.4",1,"v-src-width","v-src-max-width",2,"outline","none","text-decoration","none","-ms-interpolation-mode","bicubic","clear","both","display","inline-block !important","border","none","height","auto","float","none","width","68%","max-width","394.4px"],[1,"u-row-container",2,"padding","0px","background-color","#fdeed2"],[2,"background-color","#ffffff","height","100%","width","100% !important","border-radius","0px","-webkit-border-radius","0px","-moz-border-radius","0px"],[2,"box-sizing","border-box","height","100%","padding","0px","border-top","0px solid transparent","border-left","0px solid transparent","border-right","0px solid transparent","border-bottom","0px solid transparent","border-radius","0px","-webkit-border-radius","0px","-moz-border-radius","0px"],["align","left",1,"v-container-padding-padding",2,"overflow-wrap","break-word","word-break","break-word","padding","50px 30px","font-family","arial,helvetica,sans-serif"],[1,"v-font-size",2,"font-size","14px","line-height","140%","text-align","left","word-wrap","break-word"],[2,"line-height","140%"],["id","u_content_text_2","role","presentation","cellpadding","0","cellspacing","0","width","100%","border","0",2,"font-family","arial,helvetica,sans-serif"],["align","left",1,"v-container-padding-padding",2,"overflow-wrap","break-word","word-break","break-word","padding","10px 100px 30px","font-family","arial,helvetica,sans-serif"],[1,"v-font-size",2,"font-size","14px","line-height","170%","text-align","center","word-wrap","break-word"],[2,"font-size","14px","line-height","170%"],["href","www.myschool.com"],["align","left",1,"v-container-padding-padding",2,"overflow-wrap","break-word","word-break","break-word","padding","0px","font-family","arial,helvetica,sans-serif"],["height","0px","align","center","border","0","cellpadding","0","cellspacing","0","width","100%",2,"border-collapse","collapse","table-layout","fixed","border-spacing","0","mso-table-lspace","0pt","mso-table-rspace","0pt","vertical-align","top","border-top","1px solid #BBBBBB","-ms-text-size-adjust","100%","-webkit-text-size-adjust","100%"],[2,"word-break","break-word","border-collapse","collapse !important","vertical-align","top","font-size","0px","line-height","0px","mso-line-height-rule","exactly","-ms-text-size-adjust","100%","-webkit-text-size-adjust","100%"]],template:function(o,n){1&o&&(e.EFF(0,"const email_template = `\n"),e.j41(1,"html",0)(2,"head"),e.nrm(3,"meta",1)(4,"meta",2)(5,"meta",3)(6,"meta",4)(7,"title")(8,"link",5),e.k0s(),e.j41(9,"body",6)(10,"table",7)(11,"tbody")(12,"tr",8)(13,"td",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"table",16)(21,"tbody")(22,"tr")(23,"td",17)(24,"h1",18)(25,"span"),e.EFF(26,"Welcome to"),e.k0s()()()()()(),e.j41(27,"table",19)(28,"tbody")(29,"tr")(30,"td",20)(31,"h1",21)(32,"span",22),e.EFF(33),e.nrm(34,"br"),e.k0s()(),e.j41(35,"h5",23),e.EFF(36,"Your Gateway to a Seamless School Experience!"),e.k0s()()()()(),e.j41(37,"table",24)(38,"tbody")(39,"tr")(40,"td",25)(41,"table",26)(42,"tr")(43,"td",27),e.nrm(44,"img",28),e.k0s()()()()()()()()()()()()(),e.j41(45,"div",29)(46,"div",11)(47,"div",12)(48,"div",13)(49,"div",30)(50,"div",31)(51,"table",16)(52,"tbody")(53,"tr")(54,"td",32)(55,"div",33)(56,"p",34),e.EFF(57,"Dear Student,"),e.k0s(),e.j41(58,"p",34),e.EFF(59,"Welcome to the mySchool community!"),e.nrm(60,"br"),e.EFF(61,"Your account has been created and crredential shared benlow:"),e.k0s(),e.j41(62,"p",34)(63,"b"),e.EFF(64,"Username :"),e.k0s(),e.EFF(65),e.nrm(66,"br"),e.j41(67,"b"),e.EFF(68,"Password :"),e.k0s(),e.EFF(69),e.k0s(),e.j41(70,"p",34),e.EFF(71,"\xa0"),e.k0s(),e.j41(72,"p",34),e.EFF(73,"You can login with this credential and use you school dashboard."),e.k0s()()()()()()()()()()()(),e.j41(74,"div",29)(75,"div",11)(76,"div",12)(77,"div",13)(78,"div",30)(79,"div",31)(80,"table",35)(81,"tbody")(82,"tr")(83,"td",36)(84,"div",37)(85,"p",38)(86,"b"),e.EFF(87,"Website: "),e.k0s(),e.j41(88,"a",39),e.EFF(89,"www.myschool.com"),e.k0s()(),e.j41(90,"p",38)(91,"b"),e.EFF(92,"contact: "),e.k0s(),e.EFF(93),e.k0s(),e.j41(94,"p",38),e.EFF(95,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore."),e.k0s()()()()()(),e.j41(96,"table",16)(97,"tbody")(98,"tr")(99,"td",40)(100,"table",41)(101,"tbody")(102,"tr",8)(103,"td",42)(104,"span"),e.EFF(105,"\xa0"),e.k0s()()()()()()()()()()()()()()()()()()()()()),2&o&&(e.R7$(33),e.Lme("","School Name","-","Branch",""),e.R7$(32),e.SpI("\xa0$","username",""),e.R7$(4),e.SpI("\xa0$","password"," "),e.R7$(24),e.JRh("school Number"))},styles:["@media only screen and (min-width: 620px) {\n      .u-row[_ngcontent-%COMP%] {\n        width: 600px !important;\n      }\n\n      .u-row[_ngcontent-%COMP%]   .u-col[_ngcontent-%COMP%] {\n        vertical-align: top;\n      }\n\n\n      .u-row[_ngcontent-%COMP%]   .u-col-100[_ngcontent-%COMP%] {\n        width: 600px !important;\n      }\n\n    }\n\n    @media only screen and (max-width: 620px) {\n      .u-row-container[_ngcontent-%COMP%] {\n        max-width: 100% !important;\n        padding-left: 0px !important;\n        padding-right: 0px !important;\n      }\n\n      .u-row[_ngcontent-%COMP%] {\n        width: 100% !important;\n      }\n\n      .u-row[_ngcontent-%COMP%]   .u-col[_ngcontent-%COMP%] {\n        display: block !important;\n        width: 100% !important;\n        min-width: 320px !important;\n        max-width: 100% !important;\n      }\n\n      .u-row[_ngcontent-%COMP%]   .u-col[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] {\n        margin: 0 auto;\n      }\n\n\n      .u-row[_ngcontent-%COMP%]   .u-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n        max-width: 100% !important;\n      }\n\n    }\n\n    body[_ngcontent-%COMP%] {\n      margin: 0;\n      padding: 0\n    }\n\n    table[_ngcontent-%COMP%], \n   td[_ngcontent-%COMP%], \n   tr[_ngcontent-%COMP%] {\n      border-collapse: collapse;\n      vertical-align: top\n    }\n\n    p[_ngcontent-%COMP%] {\n      margin: 0\n    }\n\n    .ie-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], \n   .mso-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n      table-layout: fixed\n    }\n\n    *[_ngcontent-%COMP%] {\n      line-height: inherit\n    }\n\n    a[x-apple-data-detectors=true][_ngcontent-%COMP%] {\n      color: inherit !important;\n      text-decoration: none !important\n    }\n\n\n    table[_ngcontent-%COMP%], \n   td[_ngcontent-%COMP%] {\n      color: #000000;\n    }\n\n    #u_body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n      color: #0000ee;\n      text-decoration: underline;\n    }\n\n    @media (max-width: 480px) {\n      #u_content_heading_2[_ngcontent-%COMP%]   .v-font-size[_ngcontent-%COMP%] {\n        font-size: 45px !important;\n      }\n\n      #u_content_image_1[_ngcontent-%COMP%]   .v-src-width[_ngcontent-%COMP%] {\n        width: auto !important;\n      }\n\n      #u_content_image_1[_ngcontent-%COMP%]   .v-src-max-width[_ngcontent-%COMP%] {\n        max-width: 92% !important;\n      }\n\n      #u_content_social_1[_ngcontent-%COMP%]   .v-container-padding-padding[_ngcontent-%COMP%] {\n        padding: 30px 10px 10px !important;\n      }\n\n      #u_content_text_2[_ngcontent-%COMP%]   .v-container-padding-padding[_ngcontent-%COMP%] {\n        padding: 10px 10px 20px !important;\n      }\n\n      #u_content_image_3[_ngcontent-%COMP%]   .v-container-padding-padding[_ngcontent-%COMP%] {\n        padding: 20px 10px 30px !important;\n      }\n    }"]})}return i})();var p=l(9417),b=l(1283),h=l(1626);let D=(()=>{class i{constructor(t){this._http=t,this.BASE_URL=b.c.apiURL,this.PORT=b.c.port}login(t){const o=new h.Lr;return o.set("Access-Control-Allow-Origin","*"),this._http.post(this.BASE_URL+"/auth/login",t,{headers:o})}usersList(){return this._http.get(this.BASE_URL+"/auth")}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(h.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var M=l(1667),m=l(5779),j=l(7887),k=l(491),f=l(1141),R=l(2242),A=l(7076),I=l(9998),U=l(1996),w=l(5402);function N(i,a){if(1&i&&(e.j41(0,"figure",21),e.nrm(1,"img",22),e.j41(2,"figcaption"),e.EFF(3),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("src",t.BASE_URL+"/"+t.schoolData.logo,e.B4B),e.R7$(2),e.JRh(t.schoolData.name)}}function z(i,a){if(1&i&&(e.j41(0,"div",18),e.DNE(1,N,4,2,"figure",19),e.k0s(),e.j41(2,"h2",20),e.EFF(3),e.nI1(4,"translate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.schoolData),e.R7$(2),e.JRh(e.bMT(4,2,"login"))}}function G(i,a){1&i&&(e.j41(0,"small",23),e.EFF(1,"Username is not valid."),e.k0s())}function $(i,a){1&i&&(e.j41(0,"small",23),e.EFF(1,"Username is required."),e.k0s())}function B(i,a){1&i&&(e.j41(0,"small",24),e.EFF(1,"Password is required."),e.k0s())}function V(i,a){1&i&&e.nrm(0,"i",28)}function Y(i,a){if(1&i&&(e.j41(0,"div",25)(1,"p-button",26),e.DNE(2,V,1,0,"i",27),e.EFF(3," Login "),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading),e.R7$(),e.Y8G("ngIf",t.isLoading)}}let P=(()=>{class i{constructor(t,o,n,s,r,c,d){this.frmBuilder=t,this._authAPI=o,this._router=n,this._AppData=s,this._messageService=r,this._activatedRoute=c,this._store=d,this.BASE_URL=b.c.apiURL,this.isLoading=!1,this.schoolid="23334",this.loginFrm=this.frmBuilder.group({username:["",[p.k0.required,p.k0.minLength(4)]],password:["",[p.k0.required]]}),this.schoolid=this._activatedRoute.snapshot.queryParamMap.get("schoolid")}ngOnInit(){this.schoolid&&this._AppData.getSchool(this.schoolid).subscribe(t=>{this.schoolData=t.results[0]})}get f(){return this.loginFrm.controls}signinWithGoogle(){}signinWithfacebook(){}onloginSubmit(t){t.valid?(this.isLoading=!0,this.validateUser(t.value)):this._messageService.add({detail:"Username & Password required.",summary:"error",severity:"error"})}validateUser(t){this._authAPI.login(t).subscribe(o=>{let n=o.results[0];n?(sessionStorage.setItem("uid",n.uid),sessionStorage.setItem("type",n.type),sessionStorage.setItem("token",o.message||""),this._messageService.add({detail:"Succefully Login!",summary:"Success",severity:"success"}),this._router.navigate([`/user/${n.type}/${n.uid}`]),this.isLoading=!1):(this._messageService.add({detail:"Username and password not Valid.",summary:"Invalid!",severity:"error"}),this.isLoading=!1)})}userList(){this._authAPI.usersList().subscribe(t=>{console.log("############### :",t)})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.ok),e.rXU(D),e.rXU(g.Ix),e.rXU(M.u),e.rXU(m.bg),e.rXU(g.nX),e.rXU(j.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-login"]],decls:32,vars:10,consts:[[1,"bg-wallpaper"],[1,"nav","navbar"],["size","normal"],[1,"form",2,"height","calc(100vh - 78px)",3,"submit","formGroup"],[1,"login","row"],[1,"col-4"],["pTemplate","header",1,"text-center"],[1,"card-body","row"],[1,"col-12"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["type","text","pInputText","","formControlName","username","aria-describedby","username2-help",3,"placeholder"],["id","username2-help","class","p-error block",4,"ngIf"],[1,"pi","pi-key"],["type","password","pInputText","","formControlName","password","aria-describedby","password-help",3,"placeholder"],["id","password-help","class","p-error block",4,"ngIf"],["pTemplate","footer"],[1,"header"],["class","text-center",4,"ngIf"],[1,"title","text-center"],[1,"text-center"],["height","100px","width","auto",2,"width","auto","margin","30px auto 12px",3,"src"],["id","username2-help",1,"p-error","block"],["id","password-help",1,"p-error","block"],[1,"text-center","col-12"],["severity","danger","size","large","type","submit",1,"p-button-warning",3,"disabled"],["class","pi pi-spinner spin loader","style","margin-right:12px;",4,"ngIf"],[1,"pi","pi-spinner","spin","loader",2,"margin-right","12px"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"section",0)(2,"nav",1),e.nrm(3,"app-logo",2),e.k0s(),e.j41(4,"form",3),e.bIt("submit",function(){return n.onloginSubmit(n.loginFrm)}),e.j41(5,"div",4),e.nrm(6,"div",5),e.j41(7,"p-card",5),e.DNE(8,z,5,4,"ng-template",6),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"span",10),e.nrm(13,"i",11),e.k0s(),e.nrm(14,"input",12),e.nI1(15,"translate"),e.nrm(16,"br"),e.k0s(),e.DNE(17,G,2,0,"small",13),e.nrm(18,"br"),e.DNE(19,$,2,0,"small",13),e.k0s(),e.j41(20,"div",8),e.nrm(21,"br"),e.j41(22,"div",9)(23,"span",10),e.nrm(24,"i",14),e.k0s(),e.nrm(25,"input",15),e.nI1(26,"translate"),e.nrm(27,"br"),e.k0s(),e.DNE(28,B,2,0,"small",16),e.nrm(29,"br"),e.k0s()(),e.DNE(30,Y,4,2,"ng-template",17),e.k0s()()(),e.nrm(31,"app-copyright"),e.k0s()),2&o&&(e.R7$(4),e.Y8G("formGroup",n.loginFrm),e.R7$(10),e.FS9("placeholder",e.bMT(15,6,"username")),e.R7$(3),e.Y8G("ngIf",n.f.username.errors&&n.f.username.touched&&n.f.username.errors.minLength),e.R7$(2),e.Y8G("ngIf",n.f.username.errors&&n.f.username.touched&&n.f.username.errors.required),e.R7$(6),e.FS9("placeholder",e.bMT(26,8,"password")),e.R7$(3),e.Y8G("ngIf",n.f.username.errors&&n.f.password.touched&&n.f.password.invalid))},dependencies:[_.bT,k.Z,m.Ei,f.$n,R.S,p.qT,p.me,p.BC,p.cb,p.j4,p.JD,A.b,I.y8,U.Z,w.D9],styles:[".form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.form[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-top:0}"]})}return i})();var E=l(467),T=l(4412),x=l(5964);function C(i){return(0,x.p)((a,t)=>i<=t)}var K=l(6697),X=l(2771),J=l(1413);class q extends J.B{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(a){const{hasError:t,_hasValue:o,_value:n,thrownError:s,isStopped:r,_isComplete:c}=this;t?a.error(s):(r||c)&&(o&&a.next(n),a.complete())}next(a){this.isStopped||(this._value=a,this._hasValue=!0)}complete(){const{_hasValue:a,_value:t,_isComplete:o}=this;o||(this._isComplete=!0,a&&super.next(t),super.complete())}}var Z=l(4402);class F{constructor(){}loadScript(a,t,o,n=null){if(typeof document<"u"&&!document.getElementById(a)){let s=document.createElement("script");s.async=!0,s.src=t,s.onload=o,n||(n=document.head),n.appendChild(s)}}}class y{}const W={oneTapEnabled:!0};let v=(()=>{class i extends F{constructor(t,o){super(),this.clientId=t,this.initOptions=o,this.changeUser=new e.bkB,this._socialUser=new T.t(null),this._accessToken=new T.t(null),this._receivedAccessToken=new e.bkB,this.initOptions={...W,...this.initOptions},this._socialUser.pipe(C(1)).subscribe(this.changeUser),this._accessToken.pipe(C(1)).subscribe(this._receivedAccessToken)}initialize(t){return new Promise((o,n)=>{try{this.loadScript(i.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:s})=>{const r=this.createSocialUser(s);this._socialUser.next(r)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe((0,x.p)(s=>null===s)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const s=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(r=>r).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:s,prompt:this.initOptions.prompt,callback:r=>{r.error?this._accessToken.error({code:r.error,description:r.error_description,uri:r.error_uri}):this._accessToken.next(r.access_token)}})}o()})}catch(s){n(s)}})}getLoginStatus(){return new Promise((t,o)=>{this._socialUser.value?t(this._socialUser.value):o(`No user is currently logged in with ${i.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,o)=>{google.accounts.id.revoke(this._socialUser.value.id,n=>{n.error?o(n.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,o)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe((0,K.s)(1)).subscribe(t)):o(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,o)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):o("No access token to revoke"):o("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){var t=this;return(0,E.A)(function*(){google.accounts.id.disableAutoSelect(),t._socialUser.next(null)})()}createSocialUser(t){const o=new y;o.idToken=t;const n=this.decodeJwt(t);return o.id=n.sub,o.name=n.name,o.email=n.email,o.photoUrl=n.picture,o.firstName=n.given_name,o.lastName=n.family_name,o}decodeJwt(t){const n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(n).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}}return i.PROVIDER_ID="GOOGLE",i})(),H=(()=>{class i{constructor(t,o,n){this._ngZone=o,this._injector=n,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new X.m(1),this.initialized=!1,this._initState=new q,t instanceof Promise?t.then(s=>{this.initialize(s)}):this.initialize(t)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(t){this.autoLogin=void 0!==t.autoLogin&&t.autoLogin;const{onError:o=console.error}=t;t.providers.forEach(n=>{this.providers.set(n.id,"prototype"in n.provider?this._injector.get(n.provider):n.provider)}),Promise.all(Array.from(this.providers.values()).map(n=>n.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const n=[];let s=!1;this.providers.forEach((r,c)=>{const d=r.getLoginStatus();n.push(d),d.then(u=>{this.setUser(u,c),s=!0}).catch(console.debug)}),Promise.all(n).catch(()=>{s||(this._user=null,this._authState.next(null))})}this.providers.forEach((n,s)=>{(0,Z.A)(n.changeUser)&&n.changeUser.subscribe(r=>{this._ngZone.run(()=>{this.setUser(r,s)})})})}).catch(n=>{o(n)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(t){var o=this;return(0,E.A)(function*(){const n=o.providers.get(t);if(!o.initialized)throw i.ERR_NOT_INITIALIZED;if(!n)throw i.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(n instanceof v))throw i.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield n.getAccessToken()})()}refreshAuthToken(t){return new Promise((o,n)=>{if(this.initialized){const s=this.providers.get(t);s?"function"!=typeof s.refreshToken?n(i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):s.refreshToken().then(r=>{this.setUser(r,t),o()}).catch(r=>{n(r)}):n(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(i.ERR_NOT_INITIALIZED)})}refreshAccessToken(t){return new Promise((o,n)=>{if(this.initialized)if(t!==v.PROVIDER_ID)n(i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const s=this.providers.get(t);s instanceof v?s.revokeAccessToken().then(o).catch(n):n(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(i.ERR_NOT_INITIALIZED)})}signIn(t,o){return new Promise((n,s)=>{if(this.initialized){let r=this.providers.get(t);r?r.signIn(o).then(c=>{this.setUser(c,t),n(c)}).catch(c=>{s(c)}):s(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(i.ERR_NOT_INITIALIZED)})}signOut(t=!1){return new Promise((o,n)=>{if(this.initialized)if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(t).then(()=>{o(),this.setUser(null)}).catch(c=>{n(c)}):n(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(i.ERR_NOT_LOGGED_IN);else n(i.ERR_NOT_INITIALIZED)})}setUser(t,o){t&&o&&(t.provider=o),this._user=t,this._authState.next(t)}}return i.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",i.ERR_NOT_LOGGED_IN="Not logged in",i.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",i.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",i.\u0275fac=function(t){return new(t||i)(e.KVO("SocialAuthServiceConfig"),e.KVO(e.SKi),e.KVO(e.zZn))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Q=(()=>{class i extends F{constructor(t,o={}){super(),this.clientId=t,this.requestOptions={scope:"email,public_profile",locale:"en_US",fields:"name,email,picture,first_name,last_name",version:"v10.0"},this.requestOptions={...this.requestOptions,...o}}initialize(){return new Promise((t,o)=>{try{this.loadScript(i.PROVIDER_ID,`//connect.facebook.net/${this.requestOptions.locale}/sdk.js`,()=>{FB.init({appId:this.clientId,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this.requestOptions.version}),t()})}catch(n){o(n)}})}getLoginStatus(){return new Promise((t,o)=>{FB.getLoginStatus(n=>{if("connected"===n.status){let s=n.authResponse;FB.api(`/me?fields=${this.requestOptions.fields}`,r=>{let c=new y;c.id=r.id,c.name=r.name,c.email=r.email,c.photoUrl="https://graph.facebook.com/"+r.id+"/picture?type=normal&access_token="+s.accessToken,c.firstName=r.first_name,c.lastName=r.last_name,c.authToken=s.accessToken,c.response=r,t(c)})}else o(`No user is currently logged in with ${i.PROVIDER_ID}`)})})}signIn(t){const o={...this.requestOptions,...t};return new Promise((n,s)=>{FB.login(r=>{if(r.authResponse){let c=r.authResponse;FB.api(`/me?fields=${o.fields}`,d=>{let u=new y;u.id=d.id,u.name=d.name,u.email=d.email,u.photoUrl="https://graph.facebook.com/"+d.id+"/picture?type=normal",u.firstName=d.first_name,u.lastName=d.last_name,u.authToken=c.accessToken,u.response=d,n(u)})}else s("User cancelled login or did not fully authorize.")},o)})}signOut(){return new Promise((t,o)=>{FB.logout(n=>{t()})})}}return i.PROVIDER_ID="FACEBOOK",i})();var L=l(8833);const te=()=>["/auth"];function ne(i,a){1&i&&(e.j41(0,"h2",31),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"register")))}function ie(i,a){1&i&&(e.j41(0,"small",32),e.EFF(1,"type is required."),e.k0s())}function oe(i,a){1&i&&(e.j41(0,"small",33),e.EFF(1,"Username is not valid."),e.k0s())}function se(i,a){1&i&&(e.j41(0,"small",33),e.EFF(1,"Username is required."),e.k0s())}function re(i,a){1&i&&(e.j41(0,"small",34),e.EFF(1,"email is required."),e.k0s())}function ae(i,a){1&i&&(e.j41(0,"small",35),e.EFF(1,"phone is required."),e.k0s())}function le(i,a){1&i&&(e.j41(0,"div",36)(1,"button",37),e.EFF(2,"Login"),e.k0s()())}const ce=[{path:"",component:P},{path:"login",component:P},{path:"register",component:(()=>{class i{constructor(t,o){this.googleAuth=t,this.frmBuilder=o,this.loginType=[{name:"Tutor",code:"tutor"},{name:"Candidate",code:"candidate"},{name:"Admin",code:"admin"}],this.googleAuth.authState.subscribe(n=>{this.user=n,console.log(this.user),this.validateUser({username:this.user.email,password:""})}),this.loginFrm=this.frmBuilder.group({username:["",[p.k0.required,p.k0.minLength(4)]],email:["",[p.k0.required]],phone:["",[p.k0.required]],type:["",[p.k0.required]]})}get f(){return this.loginFrm.controls}signinWithGoogle(){this.googleAuth.signIn(v.PROVIDER_ID)}signinWithfacebook(){this.googleAuth.signIn(Q.PROVIDER_ID)}onloginSubmit(t){t.valid&&this.validateUser(t.value)}validateUser(t){console.log(t)}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(H),e.rXU(p.ok))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-register"]],decls:66,vars:31,consts:[[1,"bt-theme"],[1,"nav","navbar"],[1,"title"],[1,"badge","badge-info","badge-xl",2,"font-size","20px"],[1,"container-fluid",3,"submit","formGroup"],[1,"login","row"],[1,"col-4"],["pTemplate","header",1,"text-center"],[1,"card-body","row"],[1,"col-12","text-right"],[3,"routerLink"],[1,"col-sm-12","col-md-12"],["formControlName","type","placeholder","Select login type","optionLabel","name",3,"options","showClear"],["id","type-help","class","p-error block",4,"ngIf"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["type","text","pInputText","","formControlName","username","aria-describedby","username2-help",3,"placeholder"],["id","username2-help","class","p-error block",4,"ngIf"],[1,"pi","pi-envelope"],["type","email","pInputText","","formControlName","email","aria-describedby","email-help",3,"placeholder"],["id","email-help","class","p-error block",4,"ngIf"],[1,"pi","pi-phone"],["type","tel","pInputText","","formControlName","phone","maxlength","10","aria-describedby","phone-help",3,"placeholder"],["id","phone-help","class","p-error block",4,"ngIf"],[1,"col-12"],["type","button","icon","pi pi-google",1,"p-button-rounded","p-button-info",3,"onClick"],["type","button","icon","pi pi-facebook",1,"p-button-primary","p-button-rounded",3,"onClick"],["type","button","icon","pi pi-github",1,"p-button-primary","p-button-rounded",3,"onClick"],["type","button","icon","pi pi-linkedin",1,"p-button-primary","p-button-rounded",3,"onClick"],["pTemplate","footer"],[1,"title","text-center"],["id","type-help",1,"p-error","block"],["id","username2-help",1,"p-error","block"],["id","email-help",1,"p-error","block"],["id","phone-help",1,"p-error","block"],[1,"text-right","col-12"],["pButton","","type","submit",1,"p-button-warning"]],template:function(o,n){1&o&&(e.j41(0,"section",0)(1,"nav",1)(2,"div",2)(3,"h1",3),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.EFF(6," | "),e.j41(7,"small"),e.EFF(8),e.nI1(9,"translate"),e.k0s()()(),e.j41(10,"form",4),e.bIt("submit",function(){return n.onloginSubmit(n.loginFrm)}),e.nrm(11,"br")(12,"br"),e.j41(13,"div",5),e.nrm(14,"div",6),e.j41(15,"p-card",6),e.DNE(16,ne,3,3,"ng-template",7),e.j41(17,"div",8)(18,"div",9)(19,"a",10),e.EFF(20),e.nI1(21,"translate"),e.k0s()(),e.j41(22,"div",11),e.nrm(23,"p-dropdown",12),e.j41(24,"p"),e.DNE(25,ie,2,0,"small",13),e.k0s()(),e.j41(26,"div",11)(27,"div",14)(28,"span",15),e.nrm(29,"i",16),e.k0s(),e.nrm(30,"input",17),e.nI1(31,"translate"),e.k0s(),e.DNE(32,oe,2,0,"small",18)(33,se,2,0,"small",18),e.nrm(34,"br"),e.k0s(),e.j41(35,"div",11)(36,"div",14)(37,"span",15),e.nrm(38,"i",19),e.k0s(),e.nrm(39,"input",20),e.nI1(40,"translate"),e.nrm(41,"br"),e.k0s(),e.DNE(42,re,2,0,"small",21),e.nrm(43,"br"),e.k0s(),e.j41(44,"div",11)(45,"div",14)(46,"span",15),e.nrm(47,"i",22),e.k0s(),e.nrm(48,"input",23),e.nI1(49,"translate"),e.nrm(50,"br"),e.k0s(),e.DNE(51,ae,2,0,"small",24),e.nrm(52,"br"),e.k0s(),e.j41(53,"div",11)(54,"h4",2),e.EFF(55),e.nI1(56,"translate"),e.k0s()(),e.j41(57,"div",25)(58,"p-button",26),e.bIt("onClick",function(){return n.signinWithGoogle()}),e.k0s(),e.EFF(59," \xa0 "),e.j41(60,"p-button",27),e.bIt("onClick",function(){return n.signinWithfacebook()}),e.k0s(),e.EFF(61," \xa0 "),e.j41(62,"p-button",28),e.bIt("onClick",function(){return n.signinWithfacebook()}),e.k0s(),e.EFF(63," \xa0 "),e.j41(64,"p-button",29),e.bIt("onClick",function(){return n.signinWithfacebook()}),e.k0s()()(),e.DNE(65,le,3,0,"ng-template",30),e.k0s()()()()),2&o&&(e.R7$(4),e.JRh(e.bMT(5,16,"Sitetitle")),e.R7$(4),e.JRh(e.bMT(9,18,"SiteSubtitle")),e.R7$(2),e.Y8G("formGroup",n.loginFrm),e.R7$(9),e.Y8G("routerLink",e.lJ4(30,te)),e.R7$(),e.SpI("",e.bMT(21,20,"alreadyAccount")," (click to login)"),e.R7$(3),e.Y8G("options",n.loginType)("showClear",!0),e.R7$(2),e.Y8G("ngIf",n.f.type.errors&&n.f.type.touched&&n.f.type.invalid),e.R7$(5),e.FS9("placeholder",e.bMT(31,22,"username")),e.R7$(2),e.Y8G("ngIf",n.f.username.errors&&n.f.username.touched&&n.f.username.errors.minLength),e.R7$(),e.Y8G("ngIf",n.f.username.errors&&n.f.username.touched&&n.f.username.errors.required),e.R7$(6),e.FS9("placeholder",e.bMT(40,24,"email")),e.R7$(3),e.Y8G("ngIf",n.f.email.errors&&n.f.email.touched&&n.f.email.invalid),e.R7$(6),e.FS9("placeholder",e.bMT(49,26,"phone")),e.R7$(3),e.Y8G("ngIf",n.f.phone.errors&&n.f.phone.touched&&n.f.phone.invalid),e.R7$(4),e.JRh(e.bMT(56,28,"social login")))},dependencies:[_.bT,g.Wk,k.Z,m.Ei,f._f,f.$n,R.S,p.qT,p.me,p.BC,p.cb,p.tU,p.j4,p.JD,L.ms,w.D9]})}return i})()},{path:"forgot-password",component:S}];let pe=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[g.iI.forChild(ce),g.iI]})}return i})();var de=l(6306),ue=l(563);let ge=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({providers:[(0,h.$R)((0,h.Sx)()),m.bg],imports:[_.MD,pe,k.D,f.tm,R.u,ue.Z,p.YN,p.X1,w.h,L.kr,de.G,I.MB]})}return i})()}}]);